/*!
 * @gigwalk/navigator-js - v0.6.1 - 2016-03-10
 * undefined
 * Copyright (c) 2016 Bigger Boat
 */
!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i(require("react-dom"),require("react")):"function"==typeof define&&define.amd?define(["react-dom","react"],i):"object"==typeof exports?exports["navigator-js"]=i(require("react-dom"),require("react")):t["navigator-js"]=i(t.ReactDOM,t.React)}(this,function(t,i){return function(t){function i(n){if(a[n])return a[n].exports;var e=a[n]={exports:{},id:n,loaded:!1};return t[n].call(e.exports,e,e.exports,i),e.loaded=!0,e.exports}var a={};return i.m=t,i.c=a,i.p="",i(0)}([function(t,i,a){(function(){a(7),a(9),a(2),a(3),a(4),a(5),a(6),a(8),a(22),a(21),a(18),a(19),a(20),a(17),a(13),a(14),a(15),a(16),a(10),t.exports=navigatorjs}).call(window)},function(i,a){i.exports=t},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},function(){var t=function(){this._responders=[]};t.prototype={getLength:function(){return this._responders.length},isBusy:function(){return this.getLength()>0},hasResponder:function(t){return-1!=this._responders.indexOf(t)},addResponder:function(t){this._responders.push(t)},addResponders:function(t){t&&t instanceof Array&&t.length&&(this._responders=this._responders.concat(t))},takeOutResponder:function(t){var i=this._responders.indexOf(t);return-1!=i?(this._responders.splice(i,1),!0):!1},reset:function(){this._responders.length>0&&console.warn("Resetting too early? Still have responders marked for asynchronous tasks"),this._responders=[]}},navigatorjs.AsynchResponders=t}()}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},function(){var t=function(t){navigatorjs.utils.AutoBind(this,this),this._initialize(t)};t.MAX_HISTORY_LENGTH=100,t.DIRECTION_BACK=-1,t.DIRECTION_NORMAL=0,t.DIRECTION_FORWARD=1,t.prototype={_navigator:null,_history:null,_historyPosition:0,_navigationDirection:t.DIRECTION_NORMAL,maxLength:t.MAX_HISTORY_LENGTH,_initialize:function(t,i){i&&(this.maxLength=i.maxLength||this.maxLength),this._history=[],this._navigator=t,this._navigator.on(navigatorjs.NavigatorEvent.STATE_CHANGED,this._handleStateChange)},back:function(i){return this._historyPosition==this._history.length-1?!1:(i=i||1,this._historyPosition=Math.min(this._history.length-1,this._historyPosition+i),this._navigationDirection=t.DIRECTION_BACK,this._navigateToCurrentHistoryPosition(),!0)},forward:function(i){return 0===this._historyPosition?!1:(i=i||1,this._historyPosition=Math.max(0,this._historyPosition-i),this._navigationDirection=t.DIRECTION_FORWARD,this._navigateToCurrentHistoryPosition(),!0)},getPreviousState:function(t){if(0===this._history.length||this._historyPosition==Math.max(0,this._history.length-1))return null;t=t||1;var i=Math.min(this._history.length-1,Math.max(0,this._historyPosition+t));return this._history[i]},getNextState:function(t){if(0===this._history.length||0===this._historyPosition)return null;t=t||1;var i=Math.max(0,this._historyPosition-t);return this._history[i]},getCurrentState:function(){return this._history[this._historyPosition]||null},clearHistory:function(){this._history=[],this._historyPosition=1},all:function(){return this._history},getStateByPosition:function(t){return 0>t||t>this._history.length-1?null:this._history[t]},getPositionByState:function(t){return this.getPositionByPath(t.getPath())},getPositionByPath:function(t){for(var i=this.getLength(),a=0;i>a;a++)if(this._history[a].getPath()==t)return a;return!1},getLength:function(){return this._history.length},_navigateToCurrentHistoryPosition:function(){var t=this._history[this._historyPosition];this._navigator.request(t)},_handleStateChange:function(i,a){var n=a.state;switch(this._navigationDirection){case t.DIRECTION_BACK:this._navigationDirection=t.DIRECTION_NORMAL;break;case t.DIRECTION_NORMAL:this._history.splice(0,this._historyPosition),this._history.unshift(n),this._historyPosition=0,this._history.length=Math.min(this._history.length,this.maxLength);break;case t.DIRECTION_FORWARD:this._navigationDirection=t.DIRECTION_NORMAL}}},navigatorjs.History=t}()}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},this.navigatorjs.NavigationBehaviors={},this.navigatorjs.NavigationBehaviors.SHOW="show",this.navigatorjs.NavigationBehaviors.HIDE="hide",this.navigatorjs.NavigationBehaviors.UPDATE="update",this.navigatorjs.NavigationBehaviors.SWAP="swap",this.navigatorjs.NavigationBehaviors.VALIDATE="validate",this.navigatorjs.NavigationBehaviors.AUTO="auto",this.navigatorjs.NavigationBehaviors.ALL_AUTO=["show","update","swap","validate"]}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},this.navigatorjs.NavigationResponderBehaviors={},this.navigatorjs.NavigationResponderBehaviors.IHasStateInitialization={name:"IHasStateInitialization",methods:["initializeByNavigator"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateValidation={name:"IHasStateValidation",methods:["validate"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateValidationAsync={name:"IHasStateValidationAsync","extends":["IHasStateValidation"],methods:["prepareValidation"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateValidationOptional={name:"IHasStateValidationOptional","extends":["IHasStateValidation"],methods:["willValidate"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateValidationOptionalAsync={name:"IHasStateValidationOptionalAsync","extends":["IHasStateValidationAsync","IHasStateValidationOptional"],methods:[]},this.navigatorjs.NavigationResponderBehaviors.IHasStateRedirection={name:"IHasStateRedirection","extends":["IHasStateValidation"],methods:["redirect"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateSwap={name:"IHasStateSwap",methods:["willSwapToState","swapOut","swapIn"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateTransition={name:"IHasStateTransition",methods:["transitionIn","transitionOut"]},this.navigatorjs.NavigationResponderBehaviors.IHasStateUpdate={name:"IHasStateUpdate",methods:["updateState"]},this.navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface=function(t,i){if(void 0==t.navigatorBehaviors||!t.navigatorBehaviors instanceof Array)return!1;var a,n,e=navigatorjs.NavigationResponderBehaviors.getInterfaceInheritanceChain(i),s=navigatorjs.NavigationResponderBehaviors.getInterfaceMethods(e),o=s.length;for(a=0;o>a;a++)if(n=s[a],void 0==t[n]||"function"!=typeof t[n])return!1;return!0},this.navigatorjs.NavigationResponderBehaviors.getInterfaceInheritanceChain=function(t,i){var a,n,e,s,o=i||[],r=navigatorjs.NavigationResponderBehaviors[t];if(void 0==r||"object"!=typeof r)return o;if(o.push(t),a=r["extends"],void 0==a)return o;for(s=a.length,e=0;s>e;e++)n=a[e],-1==o.indexOf(n)&&navigatorjs.NavigationResponderBehaviors.getInterfaceInheritanceChain(n,o);return o},this.navigatorjs.NavigationResponderBehaviors.getInterfaceMethods=function(t){if(void 0==t||!t instanceof Array)return[];var i,a,n,e,s,o,r,h=[],u=t.length,g=[];for(a=0;u>a;a++)i=t[a],navigatorjs.NavigationResponderBehaviors.getInterfaceInheritanceChain(i,h);for(u=h.length,a=0;u>a;a++)if(i=h[a],n=navigatorjs.NavigationResponderBehaviors[i],e=n.methods,void 0!=n&&"object"==typeof n&&void 0!=e&&e instanceof Array)for(o=e.length,s=0;o>s;s++)r=e[s],-1==g.indexOf(r)&&g.push(r);return g}}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},function(){var t=function(t){this._path="",t instanceof Array?this.setSegments(t):this.setPath(t||"")};t.make=function(t){return t instanceof navigatorjs.NavigationState?t:new navigatorjs.NavigationState(t)},t.prototype={setPath:function(t){return this._path="/"+t.toLowerCase()+"/",this._path=this._path.replace(new RegExp("[^-_/A-Za-z0-9* ]","g"),""),this._path=this._path.replace(new RegExp("/+","g"),"/"),this._path=this._path.replace(/\s+/g,"-"),this},getPath:function(){return this._path},getPathRegex:function(){var t,i,a=this.getSegments(),n="/",e=a.length;for(i=0;e>i;i++)t=a[i],"**"==t?n+="(.*)":"*"==t?n+="([^/]*)/":n=n+"("+t+"|\\*|\\*\\*)/";return new RegExp(n)},setSegments:function(t){this.setPath(t.join("/"))},getSegments:function(){var t=this._path.split("/");return t.pop(),t.shift(),t},getSegment:function(t){return this.getSegments()[t]},getFirstSegment:function(){return this.getSegment(0)},getLastSegment:function(){var t=this.getSegments();return this.getSegment(t.length-1)},contains:function(i){if(i instanceof Array)return this._containsStateInArray(i);var a=i,n=t.make(a),e=n.getSegments(),s=this.getSegments(),o=this.getPath().match(n.getPathRegex()),r=n.getPath().match(this.getPathRegex()),h=!(!o||0!=o.index),u=!(!r||0!=r.index),g=n.getPath().match(/\*\*/g),v=g?g.length:0,l=e.length>s.length+v,c=s.length>e.length;return(h||u&&c)&&!l},_containsStateInArray:function(t){var i,a,n=t.length;for(i=0;n>i;i++)if(a=t[i],this.contains(a))return!0;return!1},equals:function(i){if(i instanceof Array)return this._equalsStateInArray(i);var a=i,n=t.make(a),e=this.subtract(n)||n.subtract(this);return null===e?!1:0===e.getSegments().length},_equalsStateInArray:function(t){var i,a,n=t.length;for(i=0;n>i;i++)if(a=t[i],this.equals(a))return!0;return!1},subtract:function(i){var a,n=t.make(i);return this.contains(n)?(a=this.getPath().replace(n.getPathRegex(),""),new navigatorjs.NavigationState(a)):null},append:function(i){var a=i;return i instanceof t&&(a=i.getPath()),this.setPath(this._path+a)},prepend:function(i){var a=i;return i instanceof t&&(a=i.getPath()),this.setPath(a+this._path)},hasWildcard:function(){return-1!=this.getPath().indexOf("/*/")},mask:function(i){var a,n=t.make(i),e=this.getSegments(),s=n.getSegments(),o=Math.min(e.length,s.length);for(a=0;o>a;a++)"*"===e[a]&&(e[a]=s[a]);return new navigatorjs.NavigationState(e)},clone:function(){return new navigatorjs.NavigationState(this._path)}},navigatorjs.NavigationState=t}()}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},function(){var t=null,i={},a={},n={},e={},s=null,o=null,r=null,h=!1,u=null,g=null,v=null,l=null,c=null,d=null,f=null,p=null,_=null,S=null,w=!1,I=!1,j=!1,m=0,N=function(i,a,n,e){if(!y(i,a,n,e)){var s,o,r=navigatorjs.NavigationState.make(n).getPath();switch(e){case navigatorjs.NavigationBehaviors.SHOW:o="IHasStateTransition",s=u.showByPath[r]=u.showByPath[r]||[];break;case navigatorjs.NavigationBehaviors.HIDE:o="IHasStateTransition",s=u.hideByPath[r]=u.hideByPath[r]||[];break;case navigatorjs.NavigationBehaviors.VALIDATE:o="IHasStateValidation",s=u.validateByPath[r]=u.validateByPath[r]||[];break;case navigatorjs.NavigationBehaviors.UPDATE:o="IHasStateUpdate",s=u.updateByPath[r]=u.updateByPath[r]||[];break;case navigatorjs.NavigationBehaviors.SWAP:o="IHasStateSwap",s=u.swapByPath[r]=u.swapByPath[r]||[];break;default:throw new Error("Unknown behavior: "+e)}if(!navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(a,o))throw new Error("Responder "+a+" should implement "+o+" to respond to "+e);if(i){if(!(s.indexOf(a)<0))return;s.push(a),void 0==a.__navigatorjs&&(m++,a.__navigatorjs={id:m},g[a.__navigatorjs.id]=a),v[a.__navigatorjs.id]=v[a.__navigatorjs.id]||navigatorjs.transition.TransitionStatus.UNINITIALIZED}else{var h=s.indexOf(a);if(!(h>=0))return;s.splice(h,1),delete v[a.__navigatorjs.id],delete g[a.__navigatorjs.id],"IHasStateSwap"==o&&u.swappedBefore[a]&&delete u.swappedBefore[a]}t.trigger(navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED,{statusByResponderID:v,respondersByID:g})}},y=function(t,i,a,n){if(!i)throw new Error("add: responder is null");var e,s;if(a instanceof Array){for(s=a.length,e=0;s>e;e++)N(t,i,a[e],n);return!0}if(n=n||navigatorjs.NavigationBehaviors.AUTO,n==navigatorjs.NavigationBehaviors.AUTO){for(s=navigatorjs.NavigationBehaviors.ALL_AUTO.length,e=0;s>e;e++)try{N(t,i,a,navigatorjs.NavigationBehaviors.ALL_AUTO[e])}catch(o){}return!0}return!1},T=function(t,i){var a,n,e,s,o,r,h,g=u.all.length;for(a=0;g>a;a++){o=u.all[a];for(h in o)if(t.equals(h)){if(!i)return!0;for(r=o[h],e=r.length,n=0;e>n;n++)if(s=r[n],navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(s,i))return!0;return!0}}return!1},A=function(i){if(null!=i){var a,n,e,o;if(a=navigatorjs.NavigationState.make(i),a.hasWildcard()&&(a=a.mask(s||r)),!s||s.getPath()!=a.getPath()){if(l)for(n in l)if(e=new navigatorjs.NavigationState(n),e.equals(a))return o=navigatorjs.NavigationState.make(l[n]),void A(o);t.trigger(navigatorjs.NavigatorEvent.STATE_REQUESTED,{state:a}),S=null,R(a)}}},R=function(t,i){if(!r)throw new Error("No default state set. Call start() before the first request!");if(t.getPath()!=r.getPath()||r.hasWildcard())if(j&&I&&!w)P(t);else if(D(t,!0,i))P(t);else if(p&&p.isBusy());else if(i&&j);else if(S)A(S);else if(s)B(s);else{if(t.hasWildcard())throw new Error("Check wildcard masking: "+t.getPath());if(!r)throw new Error("First request is invalid: "+t.getPath());P(r)}else P(r)},P=function(t){w=!1,I=!1,o=s,s=t,B(s),i.startTransition()},B=function(i){i!=o&&t.trigger(navigatorjs.NavigatorEvent.STATE_CHANGED,{statusByResponderID:v,respondersByID:g,state:s})};i.startTransition=function(){h=!0,t.trigger(navigatorjs.NavigatorEvent.TRANSITION_STARTED),c=new navigatorjs.AsynchResponders,c.addResponders(i.transitionOut()),c.isBusy()||i.performUpdates()},i.transitionOut=function(){var i,n,e,s=C(),o=[];H(s);for(i in v)n=g[i],-1==s.indexOf(n)&&navigatorjs.transition.TransitionStatus.HIDDEN<v[i]&&v[i]<navigatorjs.transition.TransitionStatus.DISAPPEARING&&navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(n,"IHasStateTransition")&&(v[i]=navigatorjs.transition.TransitionStatus.DISAPPEARING,o.push(n),n.transitionOut(new navigatorjs.transition.TransitionCompleteDelegate(n,navigatorjs.transition.TransitionStatus.HIDDEN,navigatorjs.NavigationBehaviors.HIDE,this,a).call));for(e=o.length;--e>=0;)v[o[e].__navigatorjs.id]==navigatorjs.transition.TransitionStatus.HIDDEN&&o.splice(e,1);return o.length>0&&t.trigger(navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED,{statusByResponderID:v,respondersByID:g}),o},i.performUpdates=function(){c.reset();var t,a,n,e,o;for(t in u.updateByPath)if(a=new navigatorjs.NavigationState(t),s.contains(a))for(n=u.updateByPath[t],H(n),e=0;e<n.length;e++)o=n[e],o.updateState(s.subtract(a),s);i.startTransitionIn()},i.startTransitionIn=function(){d=new navigatorjs.AsynchResponders,d.addResponders(i.transitionIn()),d.isBusy()||i.startSwapOut()},i.transitionIn=function(){var i,n,e,s=C(),o=[];for(H(s),e=0;e<s.length;e++)i=s[e],n=v[i.__navigatorjs.id],(n<navigatorjs.transition.TransitionStatus.APPEARING||navigatorjs.transition.TransitionStatus.SHOWN<n)&&(v[i.__navigatorjs.id]=navigatorjs.transition.TransitionStatus.APPEARING,o.push(i),i.transitionIn(new navigatorjs.transition.TransitionCompleteDelegate(i,navigatorjs.transition.TransitionStatus.SHOWN,navigatorjs.NavigationBehaviors.SHOW,this,a).call));for(e=o.length;--e>=0;)v[o[e].__navigatorjs.id]==navigatorjs.transition.TransitionStatus.SHOWN&&o.splice(e,1);return o.length>0&&t.trigger(navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED,{statusByResponderID:v,respondersByID:g}),o},i.startSwapOut=function(){f=new navigatorjs.AsynchResponders,f.addResponders(i.swapOut()),f.isBusy()||i.swapIn()},i.swapOut=function(){d.reset();var i,n,e,o,r,h,l=[];for(i in u.swapByPath)if(n=new navigatorjs.NavigationState(i),s.contains(n))for(e=u.swapByPath[i],H(e),r=0;r<e.length;r++)o=e[r],u.swappedBefore[o]&&(h=s.subtract(n),o.willSwapToState(h,s)&&(v[o.__navigatorjs.id]=navigatorjs.transition.TransitionStatus.SWAPPING,l.push(o),o.swapOut(new navigatorjs.transition.TransitionCompleteDelegate(o,navigatorjs.transition.TransitionStatus.SHOWN,navigatorjs.NavigationBehaviors.SWAP,this,a).call)));for(r=l.length;--r>=0;)v[l[r].__navigatorjs.id]==navigatorjs.transition.TransitionStatus.SHOWN&&l.splice(r,1);return l.length>0&&t.trigger(navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED,{statusByResponderID:v,respondersByID:g}),l},i.swapIn=function(){f.reset();var t,a,n,e,o,r;for(t in u.swapByPath)if(a=new navigatorjs.NavigationState(t),s.contains(a))for(n=u.swapByPath[t],H(n),r=0;r<n.length;r++)e=n[r],o=s.subtract(a),e.willSwapToState(o,s)&&(u.swappedBefore[e]=!0,e.swapIn(o,s));i.finishTransition()},i.finishTransition=function(){h=!1,t.trigger(navigatorjs.NavigatorEvent.TRANSITION_FINISHED)},a.notifyComplete=function(a,n,e){v[a.__navigatorjs.id]&&(v[a.__navigatorjs.id]=n,t.trigger(navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED,{statusByResponderID:v,respondersByID:g}));var s,o;switch(e){case navigatorjs.NavigationBehaviors.HIDE:s=c,o=i.performUpdates;break;case navigatorjs.NavigationBehaviors.SHOW:s=d,o=i.startSwapOut;break;case navigatorjs.NavigationBehaviors.SWAP:s=f,o=i.swapIn;break;default:throw new Error("Don't know how to handle notification of behavior "+e)}s.isBusy()&&(s.takeOutResponder(a),s.isBusy()||o())},e.hasResponder=function(t){if(v[t.__navigatorjs.id])return!0;var i,a,n,e;for(n=0;n<u.all.length;n++)for(i=u.all[n],e=0;e<i.length;e++)if(a=i[e],a.indexOf(t)>=0)return!0;return!1},e.getStatusByResponderID=function(){return v},e.getRespondersByID=function(){return g},e.getStatus=function(t){return v[t.__navigatorjs.id]},e.getKnownPaths=function(){var t,i={},a=[];i[r.getPath()]=!0;for(t in u.showByPath)i[new navigatorjs.NavigationState(t).getPath()]=!0;for(t in i)a.push(t);return a.sort(),a},n.notifyValidationPrepared=function(t,i,a){p.takeOutResponder(t)&&(t.validate(i,a)?I=!0:(w=!0,navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(t,"IHasStateRedirection")&&(S=t.redirect(i,a))),w||!p.isBusy()?(p.reset(),_=[],R(a,!1)):E())};var E=function(){if(0==_.length)return!1;var t=_.shift();return t.responder.prepareValidation(t.remainderState,t.unvalidatedState,t.callOnPrepared),!0},D=function(t,i,a){var e,s,o,h,g,v,l,i=void 0==i?!0:i,a=void 0==a?!0:a,c=t,d=null,f=!1,m=!1;if(c.hasWildcard())return!1;if(c.equals(r))return!0;a&&(j=!1,w=!1,I=!1,p=new navigatorjs.AsynchResponders,_=[]),e=O(c);for(s in u.validateByPath)if(o=new navigatorjs.NavigationState(s),c.contains(o)){if(h=c.subtract(o),g=u.validateByPath[s],H(g),a&&T(t))for(v=0;v<g.length;v++)l=g[v],navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(l,"IHasStateValidationOptionalAsync")&&!l.willValidate(h,c)||navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(l,"IHasStateValidationAsync")&&(j=!0,d=new navigatorjs.transition.ValidationPreparedDelegate(l,h,c,this,n).call,p.addResponder(l),_.push({responder:l,remainderState:h,unvalidatedState:c,callOnPrepared:d}));for(v=0;v<g.length;v++)if(l=g[v],!navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(l,"IHasStateValidationAsync")&&(!navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(l,"IHasStateValidationOptional")||l.willValidate(h,c))){if(!l.validate(h,c)||!T(c))return f=!0,i&&navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(l,"IHasStateRedirection")&&(S=l.redirect(h,c)),!1;m=!0}}return j&&E()?!1:p.isBusy()?!1:f||w?!1:m||I?!0:e},O=function(t){var i;for(i in u.showByPath)if(new navigatorjs.NavigationState(i).equals(t))return!0;return!1},C=function(){var t,i,a,n=x(u.showByPath,s),e=x(u.hideByPath,s);for(t=0;t<e.length;t++)i=e[t],a=n.indexOf(i),a>=0&&n.splice(a,1);return n},H=function(t){var i,a;for(i=0;i<t.length;i++)a=t[i],v[a.__navigatorjs.id]==navigatorjs.transition.TransitionStatus.UNINITIALIZED&&navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(a,"IHasStateInitialization")&&(a.initializeByNavigator(),v[a.__navigatorjs.id]=navigatorjs.transition.TransitionStatus.INITIALIZED)},x=function(t,i){var a,n=[];for(a in t)i.contains(new navigatorjs.NavigationState(a))&&(n=n.concat(t[a]));return n},U=function(){navigatorjs.utils.AutoBind(this,this),t=$({}),s=null,u=new navigatorjs.ResponderLists,g={},v={},l=null,m=0};U.prototype={add:function(t,i,a){N(!0,t,i,a)},remove:function(t,i,a){N(!1,t,i,a)},registerRedirect:function(t,i){l=l||{},l[navigatorjs.NavigationState.make(t).getPath()]=navigatorjs.NavigationState.make(i)},start:function(t,i){r=navigatorjs.NavigationState.make(t||""),this.request(i||r)},request:function(t){A(t)},getCurrentState:function(){return s?s.clone():r?r.clone():null},isTransitioning:function(){return h},on:function(i,a){return t.on(i,a),this},off:function(i,a){return t.off(i,a),this},logResponders:function(){}},navigatorjs.Navigator=U}()}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},this.navigatorjs.NavigatorEvent={},this.navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED="TRANSITION_STATUS_UPDATED",this.navigatorjs.NavigatorEvent.STATE_REQUESTED="STATE_REQUESTED",this.navigatorjs.NavigatorEvent.STATE_CHANGED="STATE_CHANGED",this.navigatorjs.NavigatorEvent.TRANSITION_STARTED="TRANSITION_STARTED",this.navigatorjs.NavigatorEvent.TRANSITION_FINISHED="TRANSITION_FINISHED"}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},function(){var t=function(){this.validateByPath={},this.updateByPath={},this.swapByPath={},this.showByPath={},this.hideByPath={},this.swappedBefore={},this.all=[this.validateByPath,this.updateByPath,this.swapByPath,this.showByPath,this.hideByPath,this.swappedBefore]};t.prototype={validateByPath:null,updateByPath:null,swapByPath:null,showByPath:null,hideByPath:null,swappedBefore:null,all:null,toString:function(){var t,i,a,n,e="ResponderLists [";for(t in this)if(i=this[t],this.all.indexOf(i)>-1){a=[];for(n in i)a.push("["+n+" = "+i[n]+"]");e+="\n	["+t+": "+a.join(", ")+"], "}return e+="]"}},navigatorjs.ResponderLists=t}()}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},this.navigatorjs.features=this.navigatorjs.features||{},function(){var t=null,i='<div class="debugConsole">Path: <input type="text" class="path" /><div class="pathRenderer"></div><div class="responders"><div class="names"></div><div class="status"></div></div></div>',a=!0,n=new RegExp("[-_/A-Za-z0-9]"),e=null,s=null,o=null,r=null,h=null,u=null,g=null,v=null,l=function(i){switch(i.which){case 13:return i.preventDefault(),void t.request(s.val());case 8:case 0:return}var a=String.fromCharCode(i.which);n.test(a)||i.preventDefault(),f()},c=function(t){switch(String.fromCharCode(t.which)){case"~":case"$":case"`":a=!a,e.css({display:a?"":"none"})}},d=function(t){var i=$(t.target).data("responder-id");console.log("Responder",g[i])},f=function(){o.text(s.val()),s.css({width:o.width()})},p=function(t,i){g=i.respondersByID,v=i.statusByResponderID,_()},_=function(){var i,a,n,e,o=t.getCurrentState(),r="",l="";if(o){s.val(o.getPath()),f();for(i in g)a=g[i],n=v[i],(navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(a,"IHasStateTransition")||navigatorjs.NavigationResponderBehaviors.implementsBehaviorInterface(a,"IHasStateInitialization"))&&(r+='<span data-responder-id="'+i+'">'+S(a)+"</span><br />",e=w(n),l+='<span style=" color:'+e+'; font-weight:bold;" data-responder-id="'+i+'">'+navigatorjs.transition.TransitionStatus.toString(n)+"</span><br />");h.html(r),u.html(l)}},S=function(t){var i=t.toString();if("[object Object]"==i&&t.$el){var a=t.$el.prop("tagName").toLowerCase(),n=t.$el.attr("class").split(" ").join(".");i=a+"."+n}return i},w=function(t){var i="";switch(t){case navigatorjs.transition.TransitionStatus.UNINITIALIZED:i="#AAAAAA";break;case navigatorjs.transition.TransitionStatus.INITIALIZED:i="#FFFFFF";break;case navigatorjs.transition.TransitionStatus.HIDDEN:i="#FF0000";break;case navigatorjs.transition.TransitionStatus.APPEARING:case navigatorjs.transition.TransitionStatus.DISAPPEARING:i="#FFFF00";break;case navigatorjs.transition.TransitionStatus.SHOWN:i="#00FF00"}return i},I=function(a){t=a,e=$(i),s=e.find(".path"),o=e.find(".pathRenderer"),r=e.find(".responders"),h=r.find(".names"),u=r.find(".status"),e.css({backgroundColor:"#000000",color:"#AAAAAA",fontFamily:"Arial",fontSize:12,padding:5}),s.css({color:"#00FF00",backgroundColor:"transparent",fontFamily:"Arial",fontSize:12,minWidth:200,border:0}),o.attr("style",s.attr("style")),o.css({position:"absolute",height:0,overflowY:"hidden"}),h.css({display:"inline-block",color:"#FF9900",marginRight:15}),u.css({display:"inline-block"}),s.on("keypress",l),$(window).on("keypress",c),h.on("click",d),u.on("click",d),t.on(navigatorjs.NavigatorEvent.STATE_CHANGED,p),t.on(navigatorjs.NavigatorEvent.TRANSITION_STATUS_UPDATED,p)};I.prototype={get$El:function(){return e}},navigatorjs.features.DebugConsole=I}()}).call(window)},function(t,i){(function(){var i={_type:"BACKBONE",initialize:function(){var t=this._viewArguments;switch(t.length){default:case 0:this._viewInstance=new this._viewClass;break;case 1:this._viewInstance=new this._viewClass(t[0]);break;case 2:this._viewInstance=new this._viewClass(t[0],t[1]);break;case 3:this._viewInstance=new this._viewClass(t[0],t[1],t[2]);break;case 4:this._viewInstance=new this._viewClass(t[0],t[1],t[2],t[3]);break;case 5:this._viewInstance=new this._viewClass(t[0],t[1],t[2],t[3],t[4])}},isMounted:function(){return this.isInstantiated()&&$.contains(document.documentElement,this.getViewInstance().$el[0])},getRootEl:function(){return this._viewInstance.$el}};t.exports=i}).call(window)},function(t,i,a){(function(){var i=a(23),n=a(1),e={_type:"REACT",_children:[],getViewInstance:function(){return this._refProxy||(this._refProxy={navigatorBehaviors:this._viewClass.navigatorBehaviors,transitionIn:function(t){this.isMounted()?this._ref.transitionIn(t):this._queuedTransitionIn=t}.bind(this),updateState:function(t,i){this.isMounted()?this._ref.updateState&&this._ref.updateState(t,i):this._queuedStateUpdate=[t,i]}.bind(this),transitionOut:function(t){this.isMounted()?this._ref.transitionOut(t):this._queuedTransitionOut=t}.bind(this)}),this._refProxy},initialize:function(){var t=this._viewArguments,a=_.extend({ref:function(t){this._ref=t,this._queuedTransitionIn&&this._ref.transitionIn&&(this._ref.transitionIn(this._queuedTransitionIn),this._queuedTransitionIn=null),this._queuedTransitionOut&&this._ref.transitionOut&&(this._ref.transitionOut(this._queuedTransitionOut),this._queuedTransitionOut=null),this._queuedStateUpdate&&this._ref.updateState&&(this._ref.updateState&&this._ref.updateState(this._queuedStateUpdate[0],this._queuedStateUpdate[1]),this._queuedStateUpdate=null)}.bind(this)},t[0]);this._viewInstance=i.createElement(this._viewClass,a,this._children.map(function(t){return t._viewInstance}))},getRootEl:function(){return $(n.findDOMNode(this._ref))},isMounted:function(){return this.isInstantiated()||this.initialize(),!!this._ref},_showChild:function(t){-1===this._children.indexOf(t)&&(this._children.push(t),t.isInstantiated()||t.initialize(),this.initialize())},_removeChild:function(t){var i=this._children.indexOf(t);-1!==i&&this._children.splice(i,1),this.initialize()}};t.exports=e}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},this.navigatorjs.integration=this.navigatorjs.integration||{},function(){var t=function(t,i){this._navigator=t,this._injector=i,this._commandsByState={},this._verifiedCommandClasses={},this.initialize()};t.prototype={navigatorBehaviors:["IHasStateValidationOptional","IHasStateUpdate"],_navigator:null,_injector:null,_commandsByState:null,_verifiedCommandClasses:null,initialize:function(){},mapCommand:function(t,i,a,n){var e=void 0==a?!1:a,s=void 0==n?!1:n,o=navigatorjs.NavigationState.make(t),r=this._commandsByState[o.getPath()]||[];if(this._commandsByState[o.getPath()]=r,this._navigator.add(this,o),this._hasCommand(r,i))throw new Error("Already mapped "+i+" to state "+o.getPath());this._verifyCommandClass(i),r.push({CommandClass:i,state:o,exactMatch:e,oneShot:s})},unmapCommand:function(t,i){var a,n,e=navigatorjs.NavigationState.make(t),s=this._commandsByState[e.getPath()]||[];for(this._commandsByState[e.getPath()]=s,this._navigator.remove(this,e),a=s.length;--a>=0;)if(n=s[a],n.CommandClass==i)return void s.splice(a,1)},willValidate:function(t,i){return this.validate(t,i)},validate:function(t,i){var a,n,e,s,o,r;for(a in this._commandsByState)if(n=navigatorjs.NavigationState.make(a),i.contains(n))for(e=this._commandsByState[a],s=i.equals(n),o=e.length;--o>=0;)if(r=e[o],s||!r.exactMatch)return!0;return!1},updateState:function(t,i){var a,n,e,s,o,r,h;for(a in this._commandsByState)if(n=navigatorjs.NavigationState.make(a),i.contains(n))for(e=this._commandsByState[a],s=i.equals(n),o=e.length;--o>=0;)r=e[o],!s&&r.exactMatch||(this._injector.map("fullState").toValue(i),this._injector.map("truncatedState").toValue(i.subtract(r.state)),h=new r.CommandClass({injector:this._injector}),h.execute(),this._injector.unmap("fullState"),this._injector.unmap("truncatedState"),r.oneShot&&this.unmapCommand(r.state,r.CommandClass))},_hasCommand:function(t,i){var a,n,e=t.length;for(a=0;e>a;a++)if(n=t[a],n.CommandClass==i)return!0;return!1},_verifyCommandClass:function(t){if(!this._verifiedCommandClasses[t]){if(void 0===t.prototype.execute)throw new Error("Command doesn't implement an execute method - "+t);this._verifiedCommandClasses[t]=!0}}},navigatorjs.integration.StateCommandMap=t}()}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},this.navigatorjs.integration=this.navigatorjs.integration||{},function(){var t,i,a,n,e=function(e){navigatorjs.utils.AutoBind(this,this),t=!1,i="/",a=e,n=!1};e.prototype={supportsPushState:!!(window&&window.history&&window.history.pushState),usePushState:function(a){if(n)throw new Error("Cannot switch to using push states after start was called");t=this.supportsPushState,i=a||i,this._redirectPushStateOrHashOnDeeplink()},isUsingPushState:function(){return t},_redirectPushStateOrHashOnDeeplink:function(){var t=this.parsePushStateUrl(window.location.pathname),a=this.parseHashUrl(window.location.hash);this.supportsPushState&&""==t&&""!=a?window.history.replaceState(null,"",new navigatorjs.NavigationState(i+a).getPath()):this.supportsPushState||""==t||(window.location.href=i+"#/"+t)},start:function(){if(n)throw new Error("Already started");n=!0,this._addListeners()},_addListeners:function(){t?$(window).on("popstate",this._onUrlChange):$(window).on("hashchange",this._onUrlChange);var i=navigatorjs.NavigatorEvent.STATE_CHANGED;a.on(i,this._onStateChanged)},_removeListeners:function(){$(window).off("popstate",this._onUrlChange),$(window).off("hashchange",this._onUrlChange)},setUrl:function(a){var n,e=this.getUrlState();t?(n=new navigatorjs.NavigationState(i+a),n.equals(e)?window.history.replaceState(null,"",n.getPath()):window.history.pushState(null,"",n.getPath())):(n=new navigatorjs.NavigationState(a),n.equals(e)||(window.location.hash=n.getPath()))},getRawUrl:function(){return t?this.parsePushStateUrl(window.location.pathname):this.parseHashUrl(window.location.hash)},getUrlState:function(){return new navigatorjs.NavigationState(this.getRawUrl())},_onStateChanged:function(){this.setUrl(a.getCurrentState().getPath())},_onUrlChange:function(){a.request(this.getUrlState())},resetUrl:function(){this.setUrl("")},parseHashUrl:function(t){return t.replace(/^#|$/g,"")},parsePushStateUrl:function(t){return t.replace(i,"")},dispose:function(){this._removeListeners()}},navigatorjs.integration.StateUrlSyncer=e}()}).call(window)},function(t,i,a){(function(){var t=a(1);this.navigatorjs=this.navigatorjs||{},this.navigatorjs.integration=this.navigatorjs.integration||{},function(){function i(t,i){this._navigator=t,this._orderedRecipes=[],this._$root=i||$("body"),this._navigator.on(navigatorjs.NavigatorEvent.STATE_REQUESTED,this._handleStateRequested.bind(this))}i.prototype={mapState:function(t){var i=[];return i=i.concat.apply(i,arguments),this._addRecipe(i)},get$Root:function(){return this._$root},_addRecipe:function(t){var i,a=new navigatorjs.integration.ViewRecipe,n=t.length;for(i=0;n>i;i++)a.addState(navigatorjs.NavigationState.make(t[i]));return this._orderedRecipes.push(a),a},_handleStateRequested:function(t,i){var a,n,e,s,o,r,h,u=i.state,g=this._orderedRecipes.length;for(a=0;g>a;a++)for(n=this._orderedRecipes[a],e=n.getStates(),r=e.length,s=0;r>s;s++)if(o=e[s],
u.contains(o)){this._addViewElementToDOM(n);var h=n.getViewInstance();Array.isArray(h.navigatorBehaviors)&&this._navigator.add(h,o)}},_addRecipeToParent:function(i,a){var n,e,s=this._$root,o=a.getInsideSelector();i&&(s=i.getRootEl()),null!=o&&(n=s.find(o),s=n.length>0?n.first():s);var r=""+(i?i._type:"BACKBONE")+" > "+a._type;switch(r){case"BACKBONE > BACKBONE":var h,u=this._orderedRecipes.indexOf(a)+1,g=this._orderedRecipes.length;for(u;g>u;u++)if(h=this._orderedRecipes[u],h.isInstantiated()&&h.isMounted()&&h.getRootEl().parent()[0]===s[0])return void h.getRootEl().before(a.getRootEl());s.append(a.getRootEl());break;case"BACKBONE > REACT":e=$(document.createElement("div")),e.addClass("react-root"),s.append(e),t.render(a._viewInstance,e[0]);break;case"REACT > REACT":for(i._showChild(a);i.getParentRecipe()&&"REACT"===i.getParentRecipe()._type;)i=i.getParentRecipe();t.render(i._viewInstance,i.getRootEl().parent()[0]);break;default:console.error("Invalid recipe type combination: "+r)}},_addViewElementToDOM:function(t){if(!t.isMounted()){t.isInstantiated()||t.initialize();var i=t.getParentRecipe();i&&(i.isMounted()||this._addViewElementToDOM(i)),this._addRecipeToParent(i,t)}}},navigatorjs.integration.StateViewMap=i}()}).call(window)},function(t,i,a){(function(){var t=a(12),i=a(11);this.navigatorjs=this.navigatorjs||{},this.navigatorjs.integration=this.navigatorjs.integration||{},function(){var a=function(){this._states=[],this._viewClass=null,this._viewArguments=[],this._viewInstance=null,this._insideSelector=null,this._parentRecipe=null,this._viewType=null};a.prototype={addState:function(t){var i,a,n=this._states.length;for(i=0;n>i;i++)if(a=this._states[i],a.getPath()===t.getPath())return;return this._states.push(t),this},getStates:function(){return this._states},toView:function(t){return this._viewClass=t,_.extend(this,i),this},toComponent:function(i){return this._viewClass=i,_.extend(this,t),this},getViewClass:function(){return this._viewClass},getViewInstance:function(){return this._viewInstance},getRootEl:function(){console.warn("Method getRootEl should be implemented by viewRecipe")},isMounted:function(){console.warn("Method isMounted should be implemented by viewRecipe")},isInstantiated:function(){return null!=this._viewInstance},withArguments:function(){if(arguments.length>5)throw new Error("Uncle Bob says you want to use too many arguments");return this._viewArguments=arguments,this},inside:function(t){return this._insideSelector=t,this},getInsideSelector:function(){return this._insideSelector},withParent:function(t){return this._parentRecipe=t,this},getParentRecipe:function(){return this._parentRecipe}},navigatorjs.integration.ViewRecipe=a}()}).call(window)},function(t,i){(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var i=this.length,a=Number(arguments[1])||0;for(a=0>a?Math.ceil(a):Math.floor(a),0>a&&(a+=i);i>a;a++)if(a in this&&this[a]===t)return a;return-1})}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},this.navigatorjs.transition=this.navigatorjs.transition||{},function(){var t=function(t,i,a,n,e){this._responder=t,this._status=i,this._behavior=a,this._navigator=n,this._transitionNamespace=e,this._called=!1,navigatorjs.utils.AutoBind(this,this)};t.prototype={call:function(){if(this._called)throw new Error("Illegal second call to transition complete. This instance is already prepared for garbage collection!");this._called=!0,this._transitionNamespace.notifyComplete(this._responder,this._status,this._behavior),this._responder=null,this._navigator=null,this._transitionNamespace=null}},navigatorjs.transition.TransitionCompleteDelegate=t}()}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},this.navigatorjs.transition=this.navigatorjs.transition||{},this.navigatorjs.transition.TransitionStatus={},this.navigatorjs.transition.TransitionStatus.UNINITIALIZED=-2,this.navigatorjs.transition.TransitionStatus.INITIALIZED=-1,this.navigatorjs.transition.TransitionStatus.HIDDEN=1,this.navigatorjs.transition.TransitionStatus.APPEARING=2,this.navigatorjs.transition.TransitionStatus.SHOWN=3,this.navigatorjs.transition.TransitionStatus.SWAPPING=4,this.navigatorjs.transition.TransitionStatus.DISAPPEARING=5,this.navigatorjs.transition.TransitionStatus.toString=function(t){switch(t){case navigatorjs.transition.TransitionStatus.UNINITIALIZED:return"UNINITIALIZED";case navigatorjs.transition.TransitionStatus.INITIALIZED:return"INITIALIZED";case navigatorjs.transition.TransitionStatus.HIDDEN:return"HIDDEN";case navigatorjs.transition.TransitionStatus.APPEARING:return"APPEARING";case navigatorjs.transition.TransitionStatus.SHOWN:return"SHOWN";case navigatorjs.transition.TransitionStatus.SWAPPING:return"SWAPPING";case navigatorjs.transition.TransitionStatus.DISAPPEARING:return"DISAPPEARING"}return"UNKNOWN"}}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},this.navigatorjs.transition=this.navigatorjs.transition||{},function(){var t=function(t,i,a,n,e){this._validatorResponder=t,this._truncatedState=i,this._fullState=a,this._navigator=n,this._validationNamespace=e,navigatorjs.utils.AutoBind(this,this)};t.prototype={call:function(){this._validationNamespace.notifyValidationPrepared(this._validatorResponder,this._truncatedState,this._fullState),this._validatorResponder=null,this._truncatedState=null,this._fullState=null,this._navigator=null,this._validationNamespace=null}},navigatorjs.transition.ValidationPreparedDelegate=t}()}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},this.navigatorjs.utils=this.navigatorjs.utils||{},this.navigatorjs.utils.AutoBind=function(t,i){var a,n;for(a in t)n=t[a],"function"==typeof n&&(t[a]=$.proxy(t[a],i))}}).call(window)},function(t,i){(function(){this.navigatorjs=this.navigatorjs||{},this.navigatorjs.utils=this.navigatorjs.utils||{},this.navigatorjs.utils.Bind=function(t,i){var a=function(t,i){"function"==typeof t&&$.proxy(t,i)};if("array"==typeof t){var n,e=t.length;for(n=0;e>n;n++)a(t[n],i)}else a(t,i)}}).call(window)},function(t,a){t.exports=i}])});